---
import DashboardLayout from "@layouts/DashboardLayout.astro";
import InfoField from "@components/InfoField.astro";
import CourseTable from "@components/table/CourseTable.astro";
import Button from "@components/Button.astro";
import MajorDropdown from "@components/MajorDropdown.astro";
import CourseRow from "@components/table/CourseRow.astro";
import FlowRadio from "@components/FlowRadio.astro";
import Flow from "@components/flow_chart/Flow";

import EditIcon from "@assets/icons/Edit.svg";
import DeleteIcon from "@assets/icons/delete.png";
---

<DashboardLayout page="home">
	<div
		class="p-2.5 flex flex-row gap-2.5 items-start justify-start self-stretch flex-1 relative"
	>
		<div
			class="flex flex-col gap-2.5 items-start justify-start self-stretch flex-1 relative"
		>
			<main
				class="bg-highlight rounded-[10px] flex flex-col gap-0 items-start justify-start self-stretch flex-1 pb-2 px-4 relative"
			>
				<div
					class="pt-2.5 pb-2.5 flex flex-row gap-5 items-start justify-start flex-wrap self-stretch shrink-0"
				>
					<InfoField title="Name:" value="Student's Name" isEditable>
						<Button
							classes="editInfo"
							theme="neutral"
							padding="p-1"
						>
							<img
								class="h-8"
								src={EditIcon.src}
								alt="editInfo"
							/>
						</Button>
					</InfoField>
					<InfoField title="Student ID:" value="xxxxxx" isEditable>
						<Button
							classes="editInfo"
							theme="neutral"
							padding="p-1"
						>
							<img
								class="h-8"
								src={EditIcon.src}
								alt="editInfo"
							/>
						</Button>
					</InfoField>
					<InfoField title="DOB:" value="xx/xx/xxxx" isEditable>
						<Button
							classes="editInfo"
							theme="neutral"
							padding="p-1"
						>
							<img
								class="h-8"
								src={EditIcon.src}
								alt="editInfo"
							/>
						</Button>
					</InfoField>
					<InfoField title="Major:" value="Major Name" isEditable>
						<Button
							classes="editInfo"
							theme="neutral"
							padding="p-1"
						>
							<img
								class="h-8"
								src={EditIcon.src}
								alt="editInfo"
							/>
						</Button>
					</InfoField>
					<InfoField
						title="Double Major:"
						value="Major Name"
						isEditable
					>
						<Button
							classes="editInfo"
							theme="neutral"
							padding="p-1"
						>
							<img
								class="h-8"
								src={EditIcon.src}
								alt="editInfo"
							/>
						</Button>
					</InfoField>
					<InfoField
						title="Minor(s)"
						value="Minor Name, Minor Name"
						isEditable
					>
						<Button
							classes="editInfo"
							theme="neutral"
							padding="p-1"
						>
							<img
								class="h-8"
								src={EditIcon.src}
								alt="editInfo"
							/>
						</Button>
					</InfoField>
				</div>
				<CourseTable height={370}>
					{
						[...Array(40).keys()].map((num) => (
							<CourseRow classes="courseRow" num={num + 1}>
								<div class="flex flex-row gap-5">
									<Button
										classes="editCourse"
										theme="neutral"
										padding="p-1"
									>
										<img
											class="h-8"
											src={EditIcon.src}
											alt="Edit Course"
										/>
									</Button>
									<Button
										classes="deleteCourse"
										theme="neutral"
										padding="p-1"
									>
										<img
											class="h-8"
											src={DeleteIcon.src}
											alt="Delete Course"
										/>
									</Button>
								</div>
							</CourseRow>
						))
					}
				</CourseTable>
			</main>

			<footer
				class="bg-highlight rounded-[10px] pt-[30px] pr-2.5 pb-[30px] pl-2.5 flex flex-row gap-0 items-start justify-start flex-wrap shrink-0 self-stretch"
			>
				<div
					class="flex flex-col gap-2.5 items-start justify-start flex-1 relative"
				>
					<InfoField
						id="earn-credits"
						title="Earned Credits:"
						total={128}
					/>
					<InfoField
						id="attempt-credits"
						title="Attempted Credits:"
						total={128}
					/>
					<!-- TODO: calculate major credits -->
					<!-- <InfoField title="Major Credits:" value="16" total={128} /> -->
					<InfoField id="cores" title="Core Courses:" total={5} />
					<InfoField id="gpa" title="GPA:" total={4} />
				</div>
				<div
					class="border-solid border-text border-l flex flex-col gap-2.5 items-start justify-start flex-1 relative"
				>
					<InfoField
						id="E1"
						title="E1 (Arts and Humanities):"
						total={2}
					/>
					<InfoField
						id="E2"
						title="E2 (Social Sciences):"
						total={2}
					/>
					<InfoField
						id="E3"
						title="E3 (Sciences and Engineering):"
						total={2}
					/>
					<InfoField
						id="E4"
						title="E4 (Mathematics and Computing):"
						total={2}
					/>
				</div>
			</footer>
		</div>

		<side
			class="bg-highlight rounded-[10px] pt-[15px] pr-5 pb-[15px] pl-5 flex flex-col gap-5 items-start justify-start self-stretch shrink-0 w-1/3"
			style="overflow-y: auto"
		>
			<MajorDropdown />
			<!-- <div class="text-text text-left relative font-bold text-2xl">
				Requirements:
			</div>
			<InfoField title="Title:" value="Value" total={8} hasProgressBar />
			<InfoField title="Title:" value="Value" total={8} hasProgressBar />
			<InfoField title="Title:" value="Value" total={8} hasProgressBar />
			<InfoField title="Title:" value="Value" total={8} hasProgressBar /> -->

			<FlowRadio />
			<div id="flow-box" class="h-full w-full">
				<Flow client:load major="" />
			</div>
		</side>
	</div>
</DashboardLayout>

<script src="../scripts/editInfo.ts"></script>
<script src="../scripts/editCourse.ts"></script>
<script src="../scripts/updateFlowChart.ts"></script>
